(()=>{var e={};e.id=105,e.ids=[105],e.modules={163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(1042).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return m},defaultHead:function(){return d}});let n=r(4985),a=r(740),i=r(687),o=a._(r(3210)),s=n._(r(7755)),l=r(4959),c=r(9513),u=r(4604);function d(e){void 0===e&&(e=!1);let t=[(0,i.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function f(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(148);let p=["name","httpEquiv","charSet","itemProp"];function h(e,t){let{inAmpMode:r}=t;return e.reduce(f,[]).reverse().concat(d(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,n={};return a=>{let i=!0,o=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){o=!0;let t=a.key.slice(a.key.indexOf("$")+1);e.has(t)?i=!1:e.add(t)}switch(a.type){case"title":case"base":t.has(a.type)?i=!1:t.add(a.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(a.props.hasOwnProperty(t)){if("charSet"===t)r.has(t)?i=!1:r.add(t);else{let e=a.props[t],r=n[t]||new Set;("name"!==t||!o)&&r.has(e)?i=!1:(r.add(e),n[t]=r)}}}}return i}}()).reverse().map((e,t)=>{let n=e.key||t;if(process.env.__NEXT_OPTIMIZE_FONTS&&!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,o.default.cloneElement(e,t)}return o.default.cloneElement(e,{key:n})})}let m=function(e){let{children:t}=e,r=(0,o.useContext)(l.AmpStateContext),n=(0,o.useContext)(c.HeadManagerContext);return(0,i.jsx)(s.default,{reduceComponentsToState:h,headManager:n,inAmpMode:(0,u.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},899:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,o.isNextRouterError)(t)||(0,i.isBailoutToCSRError)(t)||(0,l.isDynamicServerError)(t)||(0,s.isDynamicPostpone)(t)||(0,a.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(8388),a=r(2637),i=r(1846),o=r(1162),s=r(4971),l=r(8479);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return s}});let n=r(4985),a=r(4953),i=r(6533),o=n._(r(1933));function s(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=i.Image},1480:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:a,blurDataURL:i,objectFit:o}=e,s=n?40*n:t,l=a?40*a:r,c=s&&l?"viewBox='0 0 "+s+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+c+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(c?"none":"contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+i+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},1933:(e,t)=>{"use strict";function r(e){var t;let{config:r,src:n,width:a,quality:i}=e,o=i||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(n)+"&w="+a+"&q="+o+(n.startsWith("/_next/static/media/"),"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},2141:(e,t,r)=>{"use strict";r.d(t,{Dashboard:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call Dashboard() from the server but Dashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Luke\\Downloads\\fix it\\Spotify-Widget-App\\components\\dashboard.tsx","Dashboard")},2704:()=>{},2756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return n}});let r=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},2765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return a}});let n=""+r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function a(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=r(3210);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=i(e,n)),t&&(a.current=i(t,n))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3655:(e,t,r)=>{Promise.resolve().then(r.bind(r,7542))},3788:(e,t,r)=>{"use strict";r.d(t,{H:()=>o});var n=r(4999);function a(e,t){console.log(`[DEBUG] ${e}`,t||"")}function i(e,t){console.error(`[ERROR] ${e}`,t||""),t instanceof Error&&console.error(`Stack: ${t.stack}`)}async function o(){let e=await (0,n.UL)(),t=e.get("spotify_access_token"),r=e.get("spotify_refresh_token");if(!t)return a("No access token found"),null;try{let e=await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${t.value}`}});if(e.ok)return{user:await e.json(),accessToken:t.value};if(401===e.status&&r){a("Access token expired, attempting to refresh");let e=await s(r.value);if(e)return{accessToken:e}}return i("Failed to validate token",{status:e.status}),null}catch(e){return i("Error validating session",e),null}}async function s(e){let t=process.env.SPOTIFY_CLIENT_ID,r=process.env.SPOTIFY_CLIENT_SECRET;if(!t||!r)return i("Missing client credentials for token refresh"),null;try{let a=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${Buffer.from(`${t}:${r}`).toString("base64")}`},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})});if(!a.ok)return i("Failed to refresh token",await a.text()),null;let o=await a.json(),s=await (0,n.UL)();return s.set("spotify_access_token",o.access_token,{maxAge:o.expires_in,path:"/"}),o.refresh_token&&s.set("spotify_refresh_token",o.refresh_token,{maxAge:2592e3,path:"/"}),o.access_token}catch(e){return i("Error refreshing token",e),null}}},3873:e=>{"use strict";e.exports=require("path")},4118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(7413),a=r(9916),i=r(3788),o=r(2141);async function s(){return await (0,i.H)()||(0,a.redirect)("/"),(0,n.jsx)(o.Dashboard,{})}},4175:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>f,tree:()=>c});var n=r(5239),a=r(8088),i=r(8170),o=r.n(i),s=r(893),l={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let c={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4118)),"C:\\Users\\Luke\\Downloads\\fix it\\Spotify-Widget-App\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"C:\\Users\\Luke\\Downloads\\fix it\\Spotify-Widget-App\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["C:\\Users\\Luke\\Downloads\\fix it\\Spotify-Widget-App\\app\\dashboard\\page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4604:(e,t)=>{"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||r&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},4953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return s}}),r(148);let n=r(1480),a=r(2756);function i(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function s(e,t){var r,s;let l,c,u,{src:d,sizes:f,unoptimized:p=!1,priority:h=!1,loading:m,className:b,quality:y,width:x,height:g,fill:v=!1,style:w,overrideSrc:j,onLoad:_,onLoadingComplete:k,placeholder:P="empty",blurDataURL:S,fetchPriority:R,decoding:E="async",layout:C,objectFit:O,objectPosition:N,lazyBoundary:T,lazyRoot:M,...A}=e,{imgConf:z,showAltText:D,blurComplete:I,defaultLoader:L}=t,U=z||a.imageConfigDefault;if("allSizes"in U)l=U;else{let e=[...U.deviceSizes,...U.imageSizes].sort((e,t)=>e-t),t=U.deviceSizes.sort((e,t)=>e-t),n=null==(r=U.qualities)?void 0:r.sort((e,t)=>e-t);l={...U,allSizes:e,deviceSizes:t,qualities:n}}if(void 0===L)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let $=A.loader||L;delete A.loader,delete A.srcSet;let F="__next_img_default"in $;if(F){if("custom"===l.loader)throw Object.defineProperty(Error('Image with src "'+d+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=$;$=t=>{let{config:r,...n}=t;return e(n)}}if(C){"fill"===C&&(v=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[C];e&&(w={...w,...e});let t={responsive:"100vw",fill:"100vw"}[C];t&&!f&&(f=t)}let H="",W=o(x),q=o(g);if((s=d)&&"object"==typeof s&&(i(s)||void 0!==s.src)){let e=i(d)?d.default:d;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,u=e.blurHeight,S=S||e.blurDataURL,H=e.src,!v){if(W||q){if(W&&!q){let t=W/e.width;q=Math.round(e.height*t)}else if(!W&&q){let t=q/e.height;W=Math.round(e.width*t)}}else W=e.width,q=e.height}}let B=!h&&("lazy"===m||void 0===m);(!(d="string"==typeof d?d:H)||d.startsWith("data:")||d.startsWith("blob:"))&&(p=!0,B=!1),l.unoptimized&&(p=!0),F&&!l.dangerouslyAllowSVG&&d.split("?",1)[0].endsWith(".svg")&&(p=!0);let X=o(y),G=Object.assign(v?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:O,objectPosition:N}:{},D?{}:{color:"transparent"},w),J=I||"empty"===P?null:"blur"===P?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:W,heightInt:q,blurWidth:c,blurHeight:u,blurDataURL:S||"",objectFit:G.objectFit})+'")':'url("'+P+'")',V=J?{backgroundSize:G.objectFit||"cover",backgroundPosition:G.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:J}:{},Y=function(e){let{config:t,src:r,unoptimized:n,width:a,quality:i,sizes:o,loader:s}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:c}=function(e,t,r){let{deviceSizes:n,allSizes:a}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:a.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:a,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>a.find(t=>t>=e)||a[a.length-1]))],kind:"x"}}(t,a,o),u=l.length-1;return{sizes:o||"w"!==c?o:"100vw",srcSet:l.map((e,n)=>s({config:t,src:r,quality:i,width:e})+" "+("w"===c?e:n+1)+c).join(", "),src:s({config:t,src:r,quality:i,width:l[u]})}}({config:l,src:d,unoptimized:p,width:W,quality:X,sizes:f,loader:$});return{props:{...A,loading:B?"lazy":m,fetchPriority:R,width:W,height:q,decoding:E,className:b,style:{...G,...V},sizes:Y.sizes,srcSet:Y.srcSet,src:j||Y.src},meta:{unoptimized:p,priority:h,placeholder:P,fill:v}}}},4959:(e,t,r)=>{"use strict";e.exports=r(4041).vendored.contexts.AmpContext},5407:(e,t,r)=>{Promise.resolve().then(r.bind(r,2141))},5955:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},6533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return v}});let n=r(4985),a=r(740),i=r(687),o=a._(r(3210)),s=n._(r(1215)),l=n._(r(512)),c=r(4953),u=r(2756),d=r(7903);r(148);let f=r(9148),p=n._(r(1933)),h=r(3038),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function b(e,t,r,n,a,i,o){let s=null==e?void 0:e.src;e&&e["data-loaded-src"]!==s&&(e["data-loaded-src"]=s,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,a=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function y(e){return o.use?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let x=(0,o.forwardRef)((e,t)=>{let{src:r,srcSet:n,sizes:a,height:s,width:l,decoding:c,className:u,style:d,fetchPriority:f,placeholder:p,loading:m,unoptimized:x,fill:g,onLoadRef:v,onLoadingCompleteRef:w,setBlurComplete:j,setShowAltText:_,sizesInput:k,onLoad:P,onError:S,...R}=e,E=(0,o.useCallback)(e=>{e&&(S&&(e.src=e.src),e.complete&&b(e,p,v,w,j,x,k))},[r,p,v,w,j,S,x,k]),C=(0,h.useMergedRef)(t,E);return(0,i.jsx)("img",{...R,...y(f),loading:m,width:l,height:s,decoding:c,"data-nimg":g?"fill":"1",className:u,style:d,sizes:a,srcSet:n,src:r,ref:C,onLoad:e=>{b(e.currentTarget,p,v,w,j,x,k)},onError:e=>{_(!0),"empty"!==p&&j(!0),S&&S(e)}})});function g(e){let{isAppRouter:t,imgAttributes:r}=e,n={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...y(r.fetchPriority)};return t&&s.default.preload?(s.default.preload(r.src,n),null):(0,i.jsx)(l.default,{children:(0,i.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...n},"__nimg-"+r.src+r.srcSet+r.sizes)})}let v=(0,o.forwardRef)((e,t)=>{let r=(0,o.useContext)(f.RouterContext),n=(0,o.useContext)(d.ImageConfigContext),a=(0,o.useMemo)(()=>{var e;let t=m||n||u.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),a=t.deviceSizes.sort((e,t)=>e-t),i=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:a,qualities:i}},[n]),{onLoad:s,onLoadingComplete:l}=e,h=(0,o.useRef)(s);(0,o.useEffect)(()=>{h.current=s},[s]);let b=(0,o.useRef)(l);(0,o.useEffect)(()=>{b.current=l},[l]);let[y,v]=(0,o.useState)(!1),[w,j]=(0,o.useState)(!1),{props:_,meta:k}=(0,c.getImgProps)(e,{defaultLoader:p.default,imgConf:a,blurComplete:y,showAltText:w});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x,{..._,unoptimized:k.unoptimized,placeholder:k.placeholder,fill:k.fill,onLoadRef:h,onLoadingCompleteRef:b,setBlurComplete:v,setShowAltText:j,sizesInput:e.sizes,ref:t}),k.priority?(0,i.jsx)(g,{isAppRouter:!r,imgAttributes:_}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6782:()=>{},6897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return c},permanentRedirect:function(){return l},redirect:function(){return s}});let n=r(2836),a=r(9026),i=r(9121).actionAsyncStorage;function o(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let i=Object.defineProperty(Error(a.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i.digest=a.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",i}function s(e,t){var r;throw null!=t||(t=(null==i?void 0:null==(r=i.getStore())?void 0:r.isAction)?a.RedirectType.push:a.RedirectType.replace),o(e,t,n.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=a.RedirectType.replace),o(e,t,n.RedirectStatusCode.PermanentRedirect)}function c(e){return(0,a.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7542:(e,t,r)=>{"use strict";r.d(t,{Dashboard:()=>D});var n=r(687),a=r(3210),i=r(6189),o=r(1261),s=r.n(o),l=r(2688);let c=(0,l.A)("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]),u=(0,l.A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var d=r(2157),f=r(2789),p=r(2743),h=r(1279),m=r(2582);class b extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=e instanceof HTMLElement&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function y({children:e,isPresent:t,anchorX:r}){let i=(0,a.useId)(),o=(0,a.useRef)(null),s=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,a.useContext)(m.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:n,top:a,left:c,right:u}=s.current;if(t||!o.current||!e||!n)return;let d="left"===r?`left: ${c}`:`right: ${u}`;o.current.dataset.motionPopId=i;let f=document.createElement("style");return l&&(f.nonce=l),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${n}px !important;
            ${d}px !important;
            top: ${a}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[t]),(0,n.jsx)(b,{isPresent:t,childRef:o,sizeRef:s,children:a.cloneElement(e,{ref:o})})}let x=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:o,presenceAffectsLayout:s,mode:l,anchorX:c})=>{let u=(0,f.M)(g),d=(0,a.useId)(),p=(0,a.useCallback)(e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;i&&i()},[u,i]),m=(0,a.useMemo)(()=>({id:d,initial:t,isPresent:r,custom:o,onExitComplete:p,register:e=>(u.set(e,!1),()=>u.delete(e))}),s?[Math.random(),p]:[r,p]);return(0,a.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[r]),a.useEffect(()=>{r||u.size||!i||i()},[r]),"popLayout"===l&&(e=(0,n.jsx)(y,{isPresent:r,anchorX:c,children:e})),(0,n.jsx)(h.t.Provider,{value:m,children:e})};function g(){return new Map}var v=r(6044);let w=e=>e.key||"";function j(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let _=({children:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:s="sync",propagate:l=!1,anchorX:c="left"})=>{let[u,h]=(0,v.xQ)(l),m=(0,a.useMemo)(()=>j(e),[e]),b=l&&!u?[]:m.map(w),y=(0,a.useRef)(!0),g=(0,a.useRef)(m),_=(0,f.M)(()=>new Map),[k,P]=(0,a.useState)(m),[S,R]=(0,a.useState)(m);(0,p.E)(()=>{y.current=!1,g.current=m;for(let e=0;e<S.length;e++){let t=w(S[e]);b.includes(t)?_.delete(t):!0!==_.get(t)&&_.set(t,!1)}},[S,b.length,b.join("-")]);let E=[];if(m!==k){let e=[...m];for(let t=0;t<S.length;t++){let r=S[t],n=w(r);b.includes(n)||(e.splice(t,0,r),E.push(r))}return"wait"===s&&E.length&&(e=E),R(j(e)),P(m),null}let{forceRender:C}=(0,a.useContext)(d.L);return(0,n.jsx)(n.Fragment,{children:S.map(e=>{let a=w(e),d=(!l||!!u)&&(m===S||b.includes(a));return(0,n.jsx)(x,{isPresent:d,initial:(!y.current||!!r)&&void 0,custom:t,presenceAffectsLayout:o,mode:s,onExitComplete:d?void 0:()=>{if(!_.has(a))return;_.set(a,!0);let e=!0;_.forEach(t=>{t||(e=!1)}),e&&(C?.(),R(g.current),l&&h?.(),i&&i())},anchorX:c,children:e},a)})})};var k=r(5101);let P=(0,l.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),S=(0,l.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),R=(0,l.A)("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),E=(0,l.A)("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),C=(0,l.A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),O=(0,l.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),N=(0,l.A)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),T=(0,l.A)("Repeat1",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]]),M=(0,l.A)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);function A({track:e,isPlaying:t,progress:r,duration:i,nextTrack:o=null,onReplayTrack:l,onTogglePlay:c,onSkipNext:u,onSkipPrevious:d,onToggleShuffle:f,onToggleRepeat:p,shuffleState:h,repeatState:m,isLoadingAction:b}){let y=(0,a.useRef)(null),[x,g]=(0,a.useState)(!1);(0,a.useRef)([]),(0,a.useRef)(t),(0,a.useRef)(null);let[v,w]=(0,a.useState)(["#151525","#232340"]),[j,A]=(0,a.useState)("");if(!e)return(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-[#151525] rounded-xl overflow-hidden relative",children:(0,n.jsx)("p",{className:"text-white/60 font-medium",children:"Nothing playing right now"})});let D=r/i*100||0;return(0,n.jsxs)(k.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full h-full rounded-2xl overflow-hidden relative flex",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",minHeight:"300px"},children:[(0,n.jsx)(_,{mode:"wait",children:(0,n.jsxs)(k.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.2},className:"absolute inset-0 z-0",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br rounded-2xl",style:{backgroundImage:`linear-gradient(135deg, ${v[0]}cc, ${v[1]}99)`}}),(0,n.jsx)(s(),{src:e.album.images[0]?.url||"/placeholder.svg",alt:"",fill:!0,className:"object-cover mix-blend-overlay opacity-25 blur-[10px]"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-[#0F0F1A]/30 backdrop-blur-[5px] rounded-2xl"}),(0,n.jsx)("div",{className:"absolute inset-0 shadow-inner rounded-2xl",style:{boxShadow:"inset 0 1px 8px rgba(255,255,255,0.1), inset 0 -4px 10px rgba(0,0,0,0.3)"}})]},e.album.images[0]?.url)}),(0,n.jsxs)("div",{className:"relative z-10 w-full h-full flex flex-col md:flex-row px-7 py-6",children:[(0,n.jsx)(k.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1,duration:.5},className:"flex-shrink-0 mr-0 md:mr-7 mb-4 md:mb-0 self-center",children:(0,n.jsxs)("div",{className:"relative h-[90px] md:h-[110px] w-[90px] md:w-[110px] rounded-xl overflow-hidden shadow-[0_15px_35px_rgba(0,0,0,0.4)]",children:[(0,n.jsx)(s(),{src:e.album.images[0]?.url||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover"}),(0,n.jsx)("div",{className:"absolute inset-0 border border-white/10 rounded-xl"})]})}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col justify-between h-full",children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)(k.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-xs font-medium text-white/80 mb-1",children:e.artists.map(e=>e.name).join(", ")}),(0,n.jsx)(k.P.h2,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"text-xl font-bold text-white line-clamp-1",children:e.name})]}),(0,n.jsx)("div",{className:"mb-auto mt-1",children:(0,n.jsxs)(k.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"w-full relative",children:[(0,n.jsx)("canvas",{ref:y,width:600,height:60,className:"w-full h-[60px]"}),(0,n.jsx)("div",{className:"h-1.5 w-full bg-white/10 rounded-full mt-3 mb-2 overflow-hidden backdrop-blur-sm",children:(0,n.jsx)(k.P.div,{className:"h-full bg-white/90 rounded-full",style:{width:`${D}%`,boxShadow:"0 0 8px rgba(255,255,255,0.5)"},initial:{width:0},animate:{width:`${D}%`},transition:{type:"tween",ease:"linear",duration:.2}})}),(0,n.jsxs)("div",{className:"flex justify-between text-xs font-medium text-white/70",children:[(0,n.jsx)("span",{children:z(r)}),(0,n.jsx)("span",{children:z(i)})]})]})}),(0,n.jsxs)("div",{className:"flex flex-wrap justify-between items-center mt-5 mb-2",children:[(0,n.jsxs)("div",{className:"flex space-x-3 items-center mb-2 md:mb-0 order-2 md:order-1",children:[(0,n.jsx)(k.P.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:()=>g(!x),className:"rounded-full p-2 bg-white/10 backdrop-blur-sm",children:(0,n.jsx)(P,{className:`h-4 w-4 ${x?"fill-white text-white":"text-white/90"}`,strokeWidth:2})}),(0,n.jsxs)(k.P.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:l,className:"rounded-full p-2 bg-white/10 backdrop-blur-sm md:hidden relative group",children:[(0,n.jsx)(S,{className:"h-4 w-4 text-white/90",strokeWidth:2}),(0,n.jsx)("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black/80 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap transition-opacity",children:"Restart track"})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-4 order-1 md:order-2 w-full md:w-auto mb-3 md:mb-0",children:[(0,n.jsxs)(k.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`text-white/60 hover:text-white transition-colors relative group ${h?"text-white":""}`,onClick:f,children:[(0,n.jsx)(R,{className:"h-4 w-4"}),h&&(0,n.jsx)("span",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),(0,n.jsx)("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black/80 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap transition-opacity",children:h?"Shuffle: On":"Shuffle: Off"})]}),(0,n.jsx)(k.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-white/90 hover:text-white transition-colors",onClick:d,disabled:"previous"===b,children:(0,n.jsx)(E,{className:"h-5 w-5"})}),(0,n.jsx)(k.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-white rounded-full h-10 w-10 flex items-center justify-center text-[#0A0A14] shadow-[0_5px_15px_rgba(0,0,0,0.3)]",disabled:"toggle-play"===b,children:t?(0,n.jsx)(C,{className:"h-5 w-5"}):(0,n.jsx)(O,{className:"h-5 w-5 ml-0.5"})}),(0,n.jsx)(k.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-white/90 hover:text-white transition-colors",onClick:u,disabled:"next"===b,children:(0,n.jsx)(N,{className:"h-5 w-5"})}),(0,n.jsxs)(k.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`text-white/60 hover:text-white transition-colors relative group ${"off"!==m?"text-white":""}`,onClick:p,children:["track"===m?(0,n.jsx)(T,{className:"h-4 w-4"}):(0,n.jsx)(M,{className:"h-4 w-4"}),"off"!==m&&(0,n.jsx)("span",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),(0,n.jsx)("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black/80 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap transition-opacity",children:"off"===m?"Repeat: Off":"context"===m?"Repeat: All":"Repeat: One"})]})]}),(0,n.jsxs)("div",{className:"flex items-center order-3",children:[(0,n.jsxs)(k.P.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:l,className:"rounded-full p-2 bg-white/10 backdrop-blur-sm mr-2 hidden md:flex relative group",children:[(0,n.jsx)(S,{className:"h-4 w-4 text-white/90",strokeWidth:2}),(0,n.jsx)("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-black/80 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 whitespace-nowrap transition-opacity",children:"Restart track"})]}),o&&(0,n.jsxs)(k.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"flex items-center",children:[(0,n.jsx)("div",{className:"text-[10px] font-medium text-white/60 uppercase mr-2",children:"Next"}),(0,n.jsxs)(k.P.div,{whileHover:{scale:1.05},className:"relative w-10 h-10 rounded-md overflow-hidden group",children:[(0,n.jsx)(s(),{src:o.album.images[0]?.url||"/placeholder.svg",alt:o.name,fill:!0,className:"object-cover"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black/15"}),(0,n.jsxs)("div",{className:"absolute opacity-0 group-hover:opacity-100 transition-opacity duration-200 ease-in-out bottom-full right-0 mb-2 w-60 bg-black/80 backdrop-blur-lg text-white text-xs p-3 rounded-md shadow-lg pointer-events-none border border-white/10 z-20",children:[(0,n.jsxs)("div",{className:"flex items-center mb-1.5",children:[(0,n.jsx)("div",{className:"text-[10px] font-semibold text-white/60 uppercase mr-1",children:"Up Next:"}),(0,n.jsx)("div",{className:"h-px flex-grow bg-white/20 ml-1"})]}),(0,n.jsx)("p",{className:"font-bold truncate text-sm",children:o.name}),(0,n.jsx)("p",{className:"text-white/70 truncate mb-1",children:o.artists.map(e=>e.name).join(", ")}),(0,n.jsxs)("div",{className:"flex justify-between text-white/50 text-[10px] mt-2",children:[(0,n.jsxs)("span",{children:["Album: ",o.album.name]}),(0,n.jsx)("span",{children:z(o.duration_ms)})]})]})]})]})]})]})]})]})]})}function z(e){if(!e)return"0:00";let t=Math.floor(e/6e4),r=Math.floor(e%6e4/1e3);return`${t}:${r.toString().padStart(2,"0")}`}function D(){let e=(0,i.useRouter)(),{currentTrack:t,isPlaying:r,progress:o,duration:l,refreshData:d,topTracks:f,recentlyPlayed:p,queue:h}=function(){let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)([]),[s,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(0),[d,f]=(0,a.useState)(0),[p,h]=(0,a.useState)(50),[m,b]=(0,a.useState)([]),[y,x]=(0,a.useState)([]),[g,v]=(0,a.useState)(null),[w,j]=(0,a.useState)(!1),[_,k]=(0,a.useState)("off"),[P,S]=(0,a.useState)([]),[R,E]=(0,a.useState)(!1),C=(0,a.useRef)(0),{socketState:O,subscribe:N}=function(){let[e,t]=(0,a.useState)("disconnected"),[r,n]=(0,a.useState)(null),i=(0,a.useRef)(null),o=(0,a.useRef)(null),s=(0,a.useRef)(0),l=(0,a.useRef)(null),c=(0,a.useRef)({playback:new Set,queue:new Set,devices:new Set,ping:new Set,error:new Set,auth_success:new Set}),u=(0,a.useCallback)(async()=>{if(!i.current||i.current.readyState!==WebSocket.OPEN)return!1;if(!l.current)try{let e=await fetch("/api/auth/token");if(!e.ok)throw Error("Failed to fetch access token");l.current=(await e.json()).accessToken}catch(e){return console.error("Authentication error:",e),!1}return i.current.send(JSON.stringify({type:"auth",token:l.current})),!0},[]),d=(0,a.useCallback)(()=>{if((!i.current||0!==i.current.readyState)&&i.current?.readyState!==1)try{t("connecting");let e=new WebSocket("ws://localhost:3001");i.current=e,e.onopen=()=>{console.log("WebSocket connected"),t("connected"),s.current=0,u().catch(e=>{console.error("Failed to authenticate WebSocket:",e)})},e.onmessage=e=>{try{let t=JSON.parse(e.data);t.timestamp||(t.timestamp=Date.now()),n(t),"auth_success"===t.type&&console.log("WebSocket authenticated successfully"),t.type&&c.current[t.type]&&c.current[t.type].forEach(e=>{e(t.data)})}catch(e){console.error("Error parsing WebSocket message:",e)}},e.onclose=()=>{console.log("WebSocket disconnected"),t("disconnected"),p()},e.onerror=r=>{console.error("WebSocket error:",r),t("error"),e.close()}}catch(e){console.error("Error creating WebSocket:",e),t("error"),p()}},[u]),f=(0,a.useCallback)(()=>{i.current&&(i.current.close(),i.current=null),t("disconnected"),o.current&&(clearTimeout(o.current),o.current=null)},[]),p=(0,a.useCallback)(()=>{o.current&&clearTimeout(o.current);let e=Math.min(1e3*Math.pow(2,s.current),3e4);s.current++,console.log(`Scheduling WebSocket reconnection in ${e}ms`),o.current=setTimeout(()=>{"undefined"!=typeof document&&"visible"===document.visibilityState?d():o.current=null},e)},[d]);return{socketState:e,lastMessage:r,connect:d,disconnect:f,subscribe:(0,a.useCallback)((e,t)=>(c.current[e]||(c.current[e]=new Set),c.current[e].add(t),()=>{c.current[e]&&c.current[e].delete(t)}),[])}}(),T=(0,a.useCallback)(async()=>{let e=Date.now();if(!(e-C.current<1e3)){C.current=e;try{let e=await fetch("/api/spotify/current-playback");if(!e.ok)return;let r=await e.json();r.item&&(t(r.item),n(r.is_playing),u(r.progress_ms),f(r.item.duration_ms),j(r.shuffle_state),k(r.repeat_state),r.device&&l(r.device),A(r.item.id))}catch(e){console.error("Error fetching current playback:",e)}}},[]);(0,a.useCallback)(async()=>{try{let e=await fetch("/api/spotify/devices");if(!e.ok)return;let t=await e.json();o(t.devices||[])}catch(e){console.error("Error fetching devices:",e)}},[]),(0,a.useCallback)(async()=>{try{let e=await fetch("/api/spotify/top-tracks");if(!e.ok)return;let t=await e.json();b(t.items||[])}catch(e){console.error("Error fetching top tracks:",e)}},[]),(0,a.useCallback)(async()=>{try{let e=await fetch("/api/spotify/recently-played");if(!e.ok)return;let t=await e.json();x(t.items||[])}catch(e){console.error("Error fetching recently played:",e)}},[]);let M=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/spotify/queue");if(!e.ok)return;let t=await e.json();S(t.queue||[])}catch(e){console.error("Error fetching queue:",e)}},[]),A=(0,a.useCallback)(async e=>{if(e)try{let t=await fetch(`/api/spotify/audio-features?id=${e}`);if(!t.ok)return;let r=await t.json();v(r)}catch(e){console.error("Error fetching audio features:",e)}},[]);return{currentTrack:e,isPlaying:r,devices:i,currentDevice:s,progress:c,duration:d,volume:p,topTracks:m,recentlyPlayed:y,audioFeatures:g,shuffleState:w,repeatState:_,queue:P,refreshData:(0,a.useCallback)(()=>{T(),M()},[T,M]),wsConnected:R}}(),[m,b]=(0,a.useState)(null),[y,x]=(0,a.useState)(!1),{togglePlay:g,skipNext:v,skipPrevious:w,toggleShuffle:j,toggleRepeat:P,replayTrack:S,shuffleState:R,repeatState:E,isLoadingAction:C}=function(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)("off"),[i,o]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),c=(0,a.useCallback)(async(t,n,a,i)=>{o(t),l(null);try{a&&setTimeout(a,0);let i=await n();if(!i.ok)throw Error(`HTTP Error: ${i.status}`);"shuffle"===t?localStorage.setItem("spotify_shuffle_state",String(e)):"repeat"===t&&localStorage.setItem("spotify_repeat_state",r),a&&setTimeout(a,100)}catch(e){console.error(`Error with ${t}:`,e),l(t),i&&i()}finally{o(null)}},[e,r]),u=(0,a.useCallback)(async e=>{await c("toggle-play",()=>fetch("/api/spotify/player",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"toggle-play"})}),e)},[c]),d=(0,a.useCallback)(async e=>{await c("next",()=>fetch("/api/spotify/player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"next"})}),()=>{setTimeout(()=>{e&&e()},200)})},[c]),f=(0,a.useCallback)(async e=>{await c("previous",()=>fetch("/api/spotify/player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"previous"})}),()=>{setTimeout(()=>{e&&e()},200)})},[c]),p=(0,a.useCallback)(async e=>{await c("volume",()=>fetch("/api/spotify/player",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"volume",volume_percent:e})}))},[c]),h=(0,a.useCallback)(async e=>{await c("seek",()=>fetch("/api/spotify/player",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"seek",position_ms:e})}))},[c]),m=(0,a.useCallback)(async e=>{await c("transfer",()=>fetch("/api/spotify/player",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"transfer",device_id:e})}))},[c]),b=(0,a.useCallback)(async r=>{let n=!e;t(n),await c("shuffle",()=>fetch("/api/spotify/player",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"shuffle",state:n})}),r,()=>t(!n))},[e,c]);return{togglePlay:u,skipNext:d,skipPrevious:f,setVolume:p,seekPosition:h,transferPlayback:m,toggleShuffle:b,toggleRepeat:(0,a.useCallback)(async e=>{let t=["off","context","track"],a=t.indexOf(r),i=t[(a+1)%t.length];n(i),await c("repeat",()=>fetch("/api/spotify/player",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"repeat",state:i})}),e,()=>n(r))},[r,c]),replayTrack:(0,a.useCallback)(async e=>{await c("replay",()=>fetch("/api/spotify/player",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"seek",position_ms:0})}),e)},[c]),shuffleState:e,repeatState:r,isLoadingAction:i,actionError:s}}(),O=(0,a.useCallback)(()=>{v(d)},[v,d]),N=(0,a.useCallback)(()=>{w(d)},[w,d]),T=(0,a.useCallback)(()=>{j(d)},[j,d]),M=(0,a.useCallback)(()=>{P(d)},[P,d]),z=(0,a.useCallback)(()=>{g(d)},[g,d]),D=(0,a.useCallback)(()=>{S(d)},[S,d]),I=async()=>{await fetch("/api/auth/logout",{method:"POST"}),e.push("/")};return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#0A0A14] to-[#12121F] flex items-center justify-center p-4 md:p-6",children:[(0,n.jsx)(_,{children:(0,n.jsx)(k.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.5},className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:t?.album?.images?.[0]?.url&&(0,n.jsx)("div",{className:"absolute inset-0 opacity-40 mix-blend-soft-light",style:{backgroundSize:"400% 400%",backgroundPosition:"center",filter:"blur(120px)",transform:"scale(1.2)",backgroundImage:`url(${t.album.images[0].url})`}})},`glow-${m}`)}),(0,n.jsxs)(k.P.div,{initial:{opacity:0,scale:.98,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.5,ease:[.23,1,.32,1]},className:"w-full max-w-xl bg-black/30 rounded-2xl overflow-visible md:overflow-hidden relative backdrop-blur-md flex flex-col mt-[-80px] md:mt-0",style:{maxHeight:"570px",boxShadow:"0 25px 50px -20px rgba(0, 0, 0, 0.7)"},children:[(0,n.jsx)("div",{className:"absolute inset-0 border border-white/5 rounded-2xl pointer-events-none"}),(0,n.jsxs)(k.P.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},className:"flex justify-between items-center p-4 px-6 relative z-10 bg-transparent",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"rounded-full bg-black/15 backdrop-blur-sm p-2",children:(0,n.jsx)(s(),{src:"/spotify-logo.svg",alt:"Spotify",width:16,height:16,className:"object-contain"})}),(0,n.jsx)("h1",{className:"text-white text-sm font-medium",children:"Spotify Music"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(k.P.div,{animate:{scale:r?[1,1.05,1]:1,opacity:r?[1,.8,1]:.6},transition:{duration:1.4,repeat:r?1/0:0,repeatType:"loop"},className:"text-white/80 mr-1",children:(0,n.jsx)(c,{className:"h-4 w-4"})}),(0,n.jsx)(k.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:I,className:"text-white/70 hover:text-white transition-colors",children:(0,n.jsx)(u,{className:"h-4 w-4"})})]})]}),(0,n.jsx)(_,{mode:"wait",children:(0,n.jsx)(k.P.div,{initial:{opacity:+!y},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"w-full px-5 py-3 flex-1",children:(0,n.jsx)(A,{track:t,isPlaying:r,progress:o,duration:l,nextTrack:t&&h&&0!==h.length?h[0]:null,onTogglePlay:z,onSkipNext:O,onSkipPrevious:N,onToggleShuffle:T,onToggleRepeat:M,onReplayTrack:D,shuffleState:R,repeatState:E,isLoadingAction:C})},`player-${m}`)})]})]})}},7576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u},RedirectType:function(){return a.RedirectType},forbidden:function(){return o.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return s.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let n=r(6897),a=r(9026),i=r(2765),o=r(8976),s=r(899),l=r(163);class c extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class u extends URLSearchParams{append(){throw new c}delete(){throw new c}set(){throw new c}sort(){throw new c}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7755:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let n=r(3210),a=()=>{},i=()=>{};function o(e){var t;let{headManager:r,reduceComponentsToState:o}=e;function s(){if(r&&r.mountedInstances){let t=n.Children.toArray(Array.from(r.mountedInstances).filter(Boolean));r.updateHead(o(t,e))}}return null==r||null==(t=r.mountedInstances)||t.add(e.children),s(),a(()=>{var t;return null==r||null==(t=r.mountedInstances)||t.add(e.children),()=>{var t;null==r||null==(t=r.mountedInstances)||t.delete(e.children)}}),a(()=>(r&&(r._pendingUpdate=s),()=>{r&&(r._pendingUpdate=s)})),i(()=>(r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null),()=>{r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null)})),null}},7903:(e,t,r)=>{"use strict";e.exports=r(4041).vendored.contexts.ImageConfigContext},8014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a});var n=r(7413);r(2704);let a={title:"Spotify Dashboard",description:"Your personal Spotify music dashboard"};function i({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)("body",{children:e})})}},8976:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9148:(e,t,r)=>{"use strict";e.exports=r(4041).vendored.contexts.RouterContext},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9478:()=>{},9513:(e,t,r)=>{"use strict";e.exports=r(4041).vendored.contexts.HeadManagerContext},9916:(e,t,r)=>{"use strict";var n=r(7576);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},9931:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[80,999,825,282],()=>r(4175));module.exports=n})();